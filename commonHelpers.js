import{a as b,S as m,i as q}from"./assets/vendor-5401a4b0.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();async function p(t,e){const n="42031589-0742425241f8784341d5a922f",o="https://pixabay.com/api/",i={key:n,q:t,image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:15,page:e};return(await b.get(o,{params:i})).data}function E({largeImageURL:t,webformatURL:e,tags:n}){return`
      <li class="gallery-item">
        <a class="gallery-link" href="${t}">
          <img
            class="gallery-image"
            src="${e}"
            data-source="${t}"
            alt="${n}"
          />
        </a>
      </li>
      `}function w(t){return t.map(E).join("")}let s=null;const a={form:document.querySelector(".form"),textInput:document.querySelector("#query"),searchBtn:document.querySelector(".search-button"),galleryList:document.querySelector(".gallery-list"),searchLoader:document.querySelector(".search-loader"),moreLoader:document.querySelector(".more-loader"),moreBtn:document.querySelector(".more-button"),moreWrapper:document.querySelector(".more-wrapper")},f={captions:!0,captionDelay:250,captionSelector:"img",captionType:"attr",captionsData:"alt",captionPosition:"bottom",captionClass:"",captionHTML:!0,spinner:!0};let l,c,y;a.form.addEventListener("submit",B);a.moreBtn.addEventListener("click",P);async function B(t){if(t.preventDefault(),l=t.target.elements.query.value.trim(),c=1,!l){d("Empty field");return}g();try{const e=await p(l,c);e.total===0&&d("Sorry, there are no images matching your search query. Please try again!"),y=Math.ceil(e.total/15),a.galleryList.innerHTML="",h(e.hits),s=new m(".gallery-list a",f),s.refresh()}catch(e){console.error(e),d(e)}L(),S(),t.target.reset()}async function P(){c+=1,g();const t=await p(l,c);h(t.hits),L(),S(),s.destroy(),s=new m(".gallery-list a",f),s.refresh();const e=a.galleryList.firstElementChild.getBoundingClientRect().height;scrollBy({behavior:"smooth",top:e*2})}function h(t){const e=w(t);a.galleryList.insertAdjacentHTML("beforeend",e)}function v(){a.moreWrapper.classList.remove("hidden")}function O(){a.moreWrapper.classList.add("hidden")}function g(){a.searchLoader.classList.remove("hidden")}function L(){a.searchLoader.classList.add("hidden")}function d(t){q.error({message:t,position:"topRight"})}function S(){c>=y?O():v()}
//# sourceMappingURL=commonHelpers.js.map
